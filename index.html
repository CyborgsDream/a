<!--
@project: a — alpha workspace (Metrix multi-app hub)
@version: v0.1.0
@date: 2025-11-04 (Europe/Warsaw)
@blurb: Static HTML5 hub listing mini-apps via projects.json. Shared code via /shared/vX import maps. No server-side code.
-->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>a — alpha workspace</title>
<style>
:root{--bg:#0b0f14;--fg:#e9eef4;--muted:#9fb0c3;--card:#121821;--accent:#ff7a00}
html,body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui}
header{padding:24px 16px;max-width:1100px;margin:auto}
h1{margin:0 0 6px;font-size:28px}
.sub{color:var(--muted)}
.search{margin-top:16px}
.search input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #2a3340;background:#0f1319;color:var(--fg)}
main{max-width:1100px;margin:12px auto;padding:0 16px;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
.card{background:var(--card);padding:16px;border-radius:16px;border:1px solid #1f2734;box-shadow:0 2px 12px rgba(0,0,0,.25);display:flex;flex-direction:column;gap:8px}
.row{display:flex;gap:8px;align-items:center;justify-content:space-between}
.btn{appearance:none;border:1px solid #2a3340;background:#0f1319;color:var(--fg);padding:8px 10px;border-radius:10px;text-decoration:none}
.btn:hover{border-color:#364257}
.tag{display:inline-block;font-size:12px;padding:2px 8px;border-radius:999px;background:#1b2330;color:var(--muted);margin-right:6px}
.badge{font-size:12px;background:#1b2330;border:1px solid #2a3340;padding:2px 8px;border-radius:999px}
footer{max-width:1100px;margin:32px auto 24px;padding:0 16px;color:var(--muted);font-size:13px}
</style>
</head>
<body>
<header>
  <h1>a <span style="color:var(--accent)">alpha workspace</span></h1>
  <div class="sub">One repo, many mini-apps. Versioned shared code at <code>/shared/vX</code>. Pure HTML5.</div>
  <div class="search"><input id="q" placeholder="Filter by name or tag…"></div>
</header>

<main id="grid"></main>

<footer>Version <strong>v0.1.0</strong>. To bump, edit the header block.</footer>

<script type="module">
const grid = document.querySelector('#grid');
const q = document.querySelector('#q');

async function getProjects(){
  try{
    const r = await fetch('projects.json', {cache:'no-store'});
    if(!r.ok) throw new Error(String(r.status));
    return await r.json();
  }catch(e){
    console.warn('projects.json unavailable; using empty list', e);
    return [];
  }
}

function render(items, needle=''){
  const n = (needle||'').trim().toLowerCase();
  grid.innerHTML='';
  for(const p of items){
    const hay = (p.title+' '+(p.tags||[]).join(' ')).toLowerCase();
    if(n && !hay.includes(n)) continue;
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `
      <div class="row">
        <div><strong>${p.title}</strong></div>
        <span class="badge">${p.status||'wip'}</span>
      </div>
      <div>${p.description||''}</div>
      <div>${(p.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('')}</div>
      <div class="row">
        <a class="btn" href="${p.path}" target="_blank">Open</a>
        <small class="sub">shared: ${p.shared||'v1'} · ${p.updated||''}</small>
      </div>`;
    grid.appendChild(card);
  }
}

getProjects().then(items=>{
  render(items);
  q.addEventListener('input', e=>render(items, e.target.value));
});
</script>
</body>
</html>
